import telebot;
from telebot import types

bot = telebot.TeleBot('5604115254:AAHshRSViObGswt-TcHP37WPFcA7ZQw6714');

mess1 = []
mess2 = []
restoran = []

@bot.message_handler(commands=['start'])
def start_message(message):
    bot.send_message(message.chat.id,'Вас приветстувет бот-огранайзер доставки блюд!')
    keyboard = types.InlineKeyboardMarkup()
    key_oven = types.InlineKeyboardButton(text='да', callback_data='ответ')
    keyboard.row( types.InlineKeyboardButton(text='покупатель', callback_data='ответ_покупатель'), types.InlineKeyboardButton(text='сборщик заказов', callback_data='ответ_сборщик'))
    bot.send_message(message.chat.id,'Кем будете?', reply_markup=keyboard )


'''
@bot.message_handler(content_types=['text'])
def get_text_messages(message):
  if message.text.lower() == "привет":
      bot.send_message(message.from_user.id, "Привет. Сегодня прекрасная погода.")
      keyboard = telebot.types.InlineKeyboardMarkup()
      key_oven = telebot.types.InlineKeyboardButton(text='Додо', callback_data='restorane')
      keyboard.add(key_oven)
      bot.send_message(message.from_user.id, text='Откуда вы хотите сделать доставку?', reply_markup=keyboard)
'''
@bot.message_handler(content_types=['another'])  
def get_messages_time(message):
    bot.send_message(message.from_user.id, "Введите")
    
@bot.message_handler(content_types=['text'])  
def get_messages_time(message):
    if len(message.text.split(",")) == 3:
        mess = message.text.split(",")
        bot.send_message(message.from_user.id, "Ваше время на ожидание оплаты: {} минут".format(mess1[0].split()[0]))
        bot.send_message(message.from_user.id, "Ваш банк: {}".format(mess1[1]))
        bot.send_message(message.from_user.id, "Вашy номер карты: {}".format(mess1[2]))
        bot.send_message(message.from_user.id, "Участники уведомлены!")
    elif len(message.text.split(" ")) == 2:
        mess2 = message.text.split(" ")
        bot.send_message(message.from_user.id, "Ваше блюдо {}".format(mess2[0]))
        bot.send_message(message.from_user.id, "Ваш счет: {}".format(mess2[1]))
    else:
        bot.send_message(message.from_user.id, "Имя сборщика: {}".format(message.text))

    


                                                 

@bot.callback_query_handler(func=lambda call: True)
def callback_worker(call):
  if call.data == "ответ_покупатель":
      answear = """Вы учавствуете в коллективной доставке!
Просьба в теченнии 20 минут указать ресторан, желаемые блюда и имя заказчика, в целях упрощения перевода средств. После оформления у вас будет время перевести средства на счет сборщика. Вы можете выбрать ресторан из списка или указать свой."""
      
      
      keyboard2 = types.InlineKeyboardMarkup()
      keyboard2.row(types.InlineKeyboardButton(text='Море суши', callback_data='море_суши'),
                    types.InlineKeyboardButton(text='Пицца Чеддер', callback_data='пицца_чеддер'))
      keyboard2.row(types.InlineKeyboardButton(text='Суши WOK',
                                               callback_data='wok'), types.InlineKeyboardButton(text='Еда.Рядом', callback_data='еда_рядом'))
      
      
      bot.send_message(call.message.chat.id, answear, reply_markup=keyboard2)
      
  if call.data == 'ответ_сборщик':
    keyboard1 = types.InlineKeyboardMarkup()
    keyboard1.row( types.InlineKeyboardButton(text='да', callback_data='ответ_да'), types.InlineKeyboardButton(text='нет', callback_data='ответ_нет'))
    types.InlineKeyboardButton(text='да', callback_data='ответ_да'), types.InlineKeyboardButton(text='нет', callback_data='ответ_нет')
    bot.send_message(call.message.chat.id,'Инициализировать сборку?', reply_markup=keyboard1)
    
  elif call.data == "ответ_да":
    answear = "Уточните дедлайн формления заказов и перевода средств в формате: 20 мин, ВТБ, 0000 0000 0000 0000"
    bot.send_message(call.message.chat.id, answear)
    
  elif call.data == "ответ_нет":
    bot.send_message(call.message.chat.id, "Если будет что-то нужно, нажмите /start")
  elif call.data == "море_суши":
      restoran.append("Море суши")
      bot.send_message(call.message.chat.id, "Введите название блюда, его стоимость. Потом имя сборщика")
      
      
      

bot.polling(none_stop=True)
